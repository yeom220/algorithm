### 검증 요구사항
**요구사항: 검증 로직 추가**
- 타입 검증
	- 가격, 수량에 문자가 들어가면 검증 오류 처리
- 필드 검증
	- 상품명: 필수, 공백X
	- 가격: 1,000원 이상, 1백만원 이하
	- 수량: 최대 9999
- 특정 필드의 범위를 넘어서는 검증
	- 가격 \* 수량의 합은 10,000원 이상
**컨트롤러의 중요한 역할 중 하나는 HTTP 요청이 정상인지 검증하는 것이다.**
**참고: 클라이언트 검증, 서버 검증**
- 클라이언트 검증은 조작할 수 있으므로 보안에 취약하다.
- 서버만으로 검증하면, 즉각적인 고객 사용성이 부족해진다.
- 둘을 적절히 섞어서 사용하되, 최종적으로 서버 검증은 필수.
- API 방식을 사용하면 API 스펙을 잘 정의해서 검증 오류를 API 응답 결과에 잘 남겨주어야 한다.

### 프로젝트 준비 v1

### 검증 직접 처리 - 소개
사용자가 상품 등록 폼에서 정상 범위의 데이터를 입력하면, 서버에서는 검증 로직이 통과하고, 상품을 저장하고, 상품 상세화면으로 redirect 한다.

**상품 저장 검증 실패**
고객이 상품 등록 폼에서 상품명을 입력하지 않거나, 가격, 수량 등이 너무 작거나 커서 검증 범위를 넘어서면, 서버 검증 로직이 실패해야 한다. 이렇게 검증에 실패한 경우 고객에게 다시 상품 등록 폼을 보여주고, 어떤 값을 잘못 입력했는지 알려주어야 한다.

### 검증 직접 처리 - 개발
**상품 등록 검증**
- ValidationItemControllerV1 - addItem() 수정
	- **검증 오류 보관**
		- `Map<String, String> errors = new HashMap<>();`
		- 만약 검증시 오류가 발생하면 어떤 검증에서 오류가 발생했는지 정보를 담아둔다.
	- **검증 로직**
		- `import org.springframwork.utils.StringUtils;` 추가 필요
		- 검증시 오류가 발생하면 `errors`에 담아둔다. 이때 어떤 필드에서 오류가 발생했는지 구분하기 위해 오류가 발생한 필드명을 `key`로 사용한다. 이후 뷰에서 이 데이터를 사용해서 고객에게 오류 메시지를 출력할 수 있다.
	- **특정 필드의 범위를 넘어서는 검증 로직**
		- 특정 필드를 넘어서는 오류를 처리해야 할 수도 있다. 이때는 필드 이름을 넣을 수 없으므로 `globalError`라는 `key`를 사용한다.
	- **검증에 실패하면 다시 입력 폼으로**
		- 만약 검증에서 오류 메시지가 하나라도 있으면 오류 메시지를 출력하기 위해 `model`에 `errors`를 담고, 입력 폼이 있는 뷰 템플릿으로 보낸다.
- addForm.html
	- `th:if`: 오류를 표시할 태그 추가
- 글로벌 오류 메시지
	- `<div th:if="${errors?.containsKey('globalError')}">`
	  `  <p th:text="${errors['globalError']}">전체 오류 메시지</p>`
	  `</div>`
	- 오류 메시지는 `errors`에 내용이 있을 때만 출력하면 된다. 타임리프의 `th:if`를 사용하면 조건에 만족할 때만 해당 HTML 태그를 출력할 수 있다.
>[!참고 Safe Navigation Operator]
>만약 여기에서 `errors`가 `null`이라면 어떻게 될까?
>생각해보면 등록폼에 진입한 시점에는 `errors`가 없다.
>따라서 `errors.containsKey()`를 호출하는 순간 `NullPointerException`이 발생한다.
>`errors?.`은 `errors`가 `null` 일때 `NullPointerException`이 발생하는 대신, `null`을 반환하는 문법이다.
>`th:if`에서 `null`은 실패로 처리되므로 오류 메시지가 출력되지 않는다.
>이것은 스프링의 SpringEL이 제공하는 문법이다. 자세한건 공식 문서를 참고한다.
>https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#expressions-operator-safe-navigation

- 필드 오류 처리
	- `classappend`를 사용해서 해당 필드에 오류가 있으면 `field-error`라는 클래스 정보를 더해서 폼의 색깔을 빨간색으로 강조한다. 만약 값이 없으면 `_`(No-Operation)을 사용해서 아무것도 하지 않는다.
- 필드 오류 처리 -메시지
	- 글로벌 오류 메시지와 동일하다.

### 프로젝트 준비 v2
